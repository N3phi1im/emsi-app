!function(){"use strict";function t(t,e,a,n){t.state("Main",{url:"/main",templateUrl:"views/main.html",controller:"mainController as vm"}).state("Welcome",{url:"/welcome",templateUrl:"views/welcome.html",controller:"welcomeController as vm"}),e.otherwise("/welcome"),a.caseInsensitive(!0),a.strictMode(!1),n.html5Mode(!0)}t.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],angular.module("App",["ui.router","ngMaterial"]).config(t)}(),function(){"use strict";function t(t,e){var a=this;a.data=t.main_data,a.percentageReg=[],a.percentageState=[],a.percentageNat=[],a.lineReg=[],a.lineState=[],a.lineNat=[],a.time=[],a.getAverage=function(){a.average=a.data.summary.jobs.regional/a.data.summary.jobs.national_avg,a.average>0?angular.element(above_below).append('<span class="positive">above</span>'):angular.element(above_below).append('<span class="negative">below</span>')},a.getAverage(),a.getChange=function(){a.change=a.data.summary.jobs_growth.regional,a.change>0?(angular.element(symbol).append("+"),angular.element(change).addClass("positive")):(angular.element(symbol).append("-"),angular.element(change).addClass("negative"))},a.getChange(),a.getPercentage=function(){for(var t=a.data.trend_comparison.regional,e=a.data.trend_comparison.state,n=a.data.trend_comparison.nation,r=t.length-1;r>0;r)a.percentageReg.push(Math.round((t[r]-t[r-=1])/t[r]*100*100)/100);for(var i=e.length-1;i>0;i)a.percentageState.push(Math.round((e[i]-e[i-=1])/e[i]*100*100)/100);for(var l=n.length-1;l>0;l)a.percentageNat.push(Math.round((n[l]-n[l-=1])/n[l]*100*100)/100);a.percentageReg.reverse(),a.percentageState.reverse(),a.percentageNat.reverse()},a.getPercentage();for(var n=a.data.trend_comparison.start_year;n<a.data.trend_comparison.end_year;n++)a.time.push(n);a.construct=function(){for(var t=0;t<a.percentageReg.length;t++)a.lineReg.push({y:a.percentageReg[t],x:a.time[t]});for(var e=0;e<a.percentageState.length;e++)a.lineState.push({y:a.percentageState[e],x:a.time[e]});for(var n=0;n<a.percentageNat.length;n++)a.lineNat.push({y:a.percentageNat[n],x:a.time[n]})},a.construct();var r=[a.lineReg,a.lineState,a.lineNat],i=["#142850","#1185C4","#ABDAFC"],l={top:20,right:150,bottom:30,left:50},o=e.innerWidth-l.left-l.right,c=350-l.top-l.bottom,s=d3.scale.linear().domain([2001,2025]).range([0,o]),p=d3.scale.linear().domain([-20,70]).range([c,0]),g=d3.svg.axis().scale(s).ticks(25).tickPadding(10).tickValues([2001,2003,2005,2007,2009,2011,2013,2015,2017,2019,2021,2023,2025]).tickFormat(d3.format("d")).tickSize(-c),d=d3.svg.axis().scale(p).tickSubdivide(!0).orient("left"),u=d3.select("#chart").append("svg").attr("width",o+l.left+l.right).attr("height",c+l.top+l.bottom).append("g").attr("transform","translate("+l.left+","+l.top+")");u.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(g),u.append("g").attr("class","y axis").call(d),u.append("g").attr("class","y axis").append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("y",-l.left+10).attr("x",-c/2-30).text("Percent Change"),u.append("clipPath").attr("id","clip").append("rect").attr("width",o).attr("height",c);var m=d3.svg.line().interpolate("linear").x(function(t){return s(t.x)}).y(function(t){return p(t.y)});u.selectAll(".line").data(r).enter().append("path").attr("class","line").attr("clip-path","url(#clip)").attr("stroke",function(t,e){return i[e%i.length]}).attr("d",m);var h=u.selectAll(".dots").data(r).enter().append("g").attr("class","dots").attr("clip-path","url(#clip)");h.selectAll(".dot").data(function(t,e){var a=[];return t.forEach(function(t,n){a.push({index:e,point:t})}),a}).enter().append("circle").attr("class","dot").attr("r",2.5).attr("fill",function(t,e){return i[t.index%i.length]}).attr("transform",function(t){return"translate("+s(t.point.x)+","+p(t.point.y)+")"})}t.$inject=["mainService","$window"],angular.module("App").controller("mainController",t)}(),function(){"use strict";function t(t,e){var a=this;a.data=t.data,a.getData=function(){t.getData(a.requested_data).then(function(t){e.go("Main")})}}t.$inject=["mainService","$state"],angular.module("App").controller("welcomeController",t)}(),function(){"use strict";function t(t,e){function a(a){var r=e.defer();return t.post("/data",a).success(function(t){n.main_data=t,r.resolve(t)}),r.promise}var n={};return n.getData=a,n.main_data={},console.log("loading service"),n}t.$inject=["$http","$q"],angular.module("App").factory("mainService",t)}();