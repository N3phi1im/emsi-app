!function(){"use strict";function t(t,e,a,n){t.state("Main",{url:"/main",templateUrl:"views/main.html",controller:"mainController as vm"}).state("Welcome",{url:"/welcome",templateUrl:"views/welcome.html",controller:"welcomeController as vm"}),e.otherwise("/welcome"),a.caseInsensitive(!0),a.strictMode(!1),n.html5Mode(!0)}t.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],angular.module("App",["ui.router","ngMaterial"]).config(t)}(),function(){"use strict";function t(t,e){function a(){return localStorage.data}function n(){return JSON.parse(a())}var r=this;a()?r.data=n():r.data=t.main_data,r.percentageReg=[],r.percentageState=[],r.percentageNat=[],r.lineReg=[],r.lineState=[],r.lineNat=[],r.time=[],r.getAverage=function(){r.average=r.data.summary.jobs.regional/r.data.summary.jobs.national_avg,r.average>0?angular.element(above_below).append('<span class="positive">above</span>'):angular.element(above_below).append('<span class="negative">below</span>')},r.getAverage(),r.getChange=function(){r.change=r.data.summary.jobs_growth.regional,r.change>0?(angular.element(symbol).append("+"),angular.element(change).addClass("positive")):(angular.element(symbol).append("-"),angular.element(change).addClass("negative"))},r.getChange(),r.getPercentage=function(){for(var t=r.data.trend_comparison.regional,e=r.data.trend_comparison.state,a=r.data.trend_comparison.nation,n=t.length-1;n>0;n)r.percentageReg.push(Math.round((t[n]-t[n-=1])/t[n]*100*100)/100);for(var i=e.length-1;i>0;i)r.percentageState.push(Math.round((e[i]-e[i-=1])/e[i]*100*100)/100);for(var o=a.length-1;o>0;o)r.percentageNat.push(Math.round((a[o]-a[o-=1])/a[o]*100*100)/100);r.percentageReg.reverse(),r.percentageState.reverse(),r.percentageNat.reverse()},r.getPercentage();for(var i=r.data.trend_comparison.start_year;i<r.data.trend_comparison.end_year;i++)r.time.push(i);r.construct=function(){for(var t=0;t<r.percentageReg.length;t++)r.lineReg.push({y:r.percentageReg[t],x:r.time[t]});for(var e=0;e<r.percentageState.length;e++)r.lineState.push({y:r.percentageState[e],x:r.time[e]});for(var a=0;a<r.percentageNat.length;a++)r.lineNat.push({y:r.percentageNat[a],x:r.time[a]})},r.construct();var o=[r.lineReg,r.lineState,r.lineNat],l=["#142850","#1185C4","#ABDAFC"],c={top:20,right:150,bottom:30,left:50},s=e.innerWidth-c.left-c.right,p=350-c.top-c.bottom,g=d3.scale.linear().domain([2001,2025]).range([0,s]),d=d3.scale.linear().domain([-20,70]).range([p,0]),u=d3.svg.axis().scale(g).ticks(25).tickPadding(10).tickValues([2001,2003,2005,2007,2009,2011,2013,2015,2017,2019,2021,2023,2025]).tickFormat(d3.format("d")).tickSize(-p),m=d3.svg.axis().scale(d).tickSubdivide(!0).orient("left"),h=d3.select("#chart").append("svg").attr("width",s+c.left+c.right).attr("height",p+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");h.append("g").attr("class","x axis").attr("transform","translate(0,"+p+")").call(u),h.append("g").attr("class","y axis").call(m),h.append("g").attr("class","y axis").append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("y",-c.left+10).attr("x",-p/2-30).text("Percent Change"),h.append("clipPath").attr("id","clip").append("rect").attr("width",s).attr("height",p);var f=d3.svg.line().interpolate("linear").x(function(t){return g(t.x)}).y(function(t){return d(t.y)});h.selectAll(".line").data(o).enter().append("path").attr("class","line").attr("clip-path","url(#clip)").attr("stroke",function(t,e){return l[e%l.length]}).attr("d",f);var v=h.selectAll(".dots").data(o).enter().append("g").attr("class","dots").attr("clip-path","url(#clip)");v.selectAll(".dot").data(function(t,e){var a=[];return t.forEach(function(t,n){a.push({index:e,point:t})}),a}).enter().append("circle").attr("class","dot").attr("r",2.5).attr("fill",function(t,e){return l[t.index%l.length]}).attr("transform",function(t){return"translate("+g(t.point.x)+","+d(t.point.y)+")"})}t.$inject=["mainService","$window"],angular.module("App").controller("mainController",t)}(),function(){"use strict";function t(t,e){var a=this;a.data=t.data,a.getData=function(){t.getData(a.requested_data).then(function(t){e.go("Main")})}}t.$inject=["mainService","$state"],angular.module("App").controller("welcomeController",t)}(),function(){"use strict";function t(t,e){function a(a){var n=e.defer();return t.post("/data",a).success(function(t){r.main_data=t,r.setData(t),n.resolve(t)}),n.promise}function n(t){localStorage.setItem("data",JSON.stringify(t))}var r={};return r.getData=a,r.setData=n,r.main_data={},r}t.$inject=["$http","$q"],angular.module("App").factory("mainService",t)}();